---
import Base from '../../layouts/Base.astro';
import { getCollection } from 'astro:content';

const photos = (await getCollection('photos'))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<Base title="Photos - Rhys Sullivan" description="Astrophotography and space photos." wide>
  <div>
    <h1 class="text-2xl font-semibold tracking-tight mb-2">space photos</h1>
    <p class="text-[var(--text-muted)] mb-8">
      captured inside san francisco from my patio
    </p>

    {photos.length === 0 ? (
      <p class="text-[var(--text-muted)]">photos coming soon</p>
    ) : (
      <div class="grid grid-cols-2 lg:grid-cols-3 auto-rows-[300px] gap-3">
        {photos.map((photo) => (
          <a
            href={`/photos/${photo.slug}`}
            class:list={[
              'group block',
              photo.data.featured && 'row-span-2',
            ]}
          >
            <figure class="h-full">
              <div class="relative overflow-hidden rounded-lg bg-[var(--bg-secondary)] h-full">
                <img
                  src={photo.data.src}
                  alt={photo.data.alt}
                  class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-[1.02]"
                  loading="lazy"
                />
                <figcaption class="absolute inset-x-0 bottom-0 p-3 bg-gradient-to-t from-black/70 to-transparent">
                  <h3 class="font-medium text-sm text-white">{photo.data.title}</h3>
                  <span class="text-xs text-white/70">
                    {photo.data.date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}
                  </span>
                </figcaption>
              </div>
            </figure>
          </a>
        ))}
      </div>
    )}
  </div>
</Base>
