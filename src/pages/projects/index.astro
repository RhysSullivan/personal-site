---
import Base from "../../layouts/Base.astro";
import { getCollection } from "astro:content";

const projects = (await getCollection("projects")).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
---

<Base title="Projects - Rhys Sullivan" description="Things I've built.">
  <div>
    <h1 class="text-2xl font-semibold tracking-tight mb-2">projects</h1>
    <p class="text-[var(--text-muted)] mb-8">Things I've built.</p>

    {
      projects.length === 0 ? (
        <p class="text-[var(--text-muted)]">nothing here yet</p>
      ) : (
        <ul class="space-y-4">
          {projects.map((project) => (
            <li>
              <a
                href={`/projects/${project.slug}`}
                class="group block p-4 -mx-4 rounded-lg hover:bg-[var(--bg-secondary)] transition-colors"
              >
                <div class="flex items-center gap-3 mb-2">
                  <h2 class="font-medium group-hover:text-[var(--accent)] transition-colors">
                    {project.data.title}
                  </h2>
                  {project.data.url && (
                    <span class="text-xs text-[var(--text-muted)]">
                      {new URL(project.data.url).hostname}
                    </span>
                  )}
                </div>
                <p class="text-sm text-[var(--text-muted)]">
                  {project.data.description}
                </p>
              </a>
            </li>
          ))}
        </ul>
      )
    }
  </div>
</Base>
